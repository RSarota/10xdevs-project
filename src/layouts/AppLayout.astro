---
import Layout from "./Layout.astro";
import AppNavigation from "../components/AppNavigation";
import { ThemeToggle } from "../components/ThemeToggle";

interface Props {
  title: string;
  currentPath?: string;
  isAdmin?: boolean;
}

const { title, currentPath = "/dashboard", isAdmin = false } = Astro.props;
---

<Layout title={title}>
  <div
    class="min-h-screen flex bg-gradient-to-br from-[hsl(var(--apple-gradient-from))] via-[hsl(var(--apple-gradient-via))] to-[hsl(var(--apple-gradient-to))]"
  >
    <!-- Subtle animated background pattern -->
    <div class="fixed inset-0 opacity-10 pointer-events-none">
      <div
        class="absolute top-1/4 right-1/4 w-96 h-96 bg-[hsl(var(--apple-blue)/0.008)] rounded-full blur-3xl animate-pulse"
        style="animation-duration: 6s; animation-delay: 2s;"
      >
      </div>
      <div
        class="absolute bottom-1/3 left-1/3 w-80 h-80 bg-[hsl(var(--apple-purple)/0.005)] rounded-full blur-3xl animate-pulse"
        style="animation-duration: 5s; animation-delay: 1s;"
      >
      </div>
    </div>
    <!-- Sidebar Navigation (Desktop) -->
    <AppNavigation currentPath={currentPath} isAdmin={isAdmin} client:load />

    <!-- Main Content Area -->
    <main
      class="flex-1 lg:ml-64 pt-[60px] lg:pt-0 pb-[80px] lg:pb-0 flex flex-col transition-all duration-300"
      style="--sidebar-width: 256px;"
    >
      <div class="flex-1">
        <slot />
      </div>

      <!-- Footer -->
      <footer class="mt-auto w-full">
        <div class="max-w-7xl mx-auto w-full px-[var(--apple-space-5)] py-[var(--apple-space-3)]">
          <div class="flex items-center justify-center gap-3">
            <span class="text-[var(--apple-font-caption2)] text-[hsl(var(--apple-label-tertiary))]">
              Â© 2025 10xCards
            </span>
            <ThemeToggle client:load />
          </div>
        </div>
      </footer>
    </main>
  </div>
</Layout>
